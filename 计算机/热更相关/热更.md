# 热更

## 大纲

1. 版本号管理

2. 打包，包括母包和热更新包

3. 检测热更新，版本更新服务器，热更新服务器

4. 下载热更新资源

5. 热更新资源的加载



![image-20200803182525753](C:\Users\XINDONG\AppData\Roaming\Typora\typora-user-images\image-20200803182525753.png)

## 版本号管理

1. 3位版本号或者四位版本号，并且笔者的游戏还配有编译版本号，和服务器协议版本号
2. 编译版本号，自称BuildNum，每次编译+1，用来填IOS的BuildNumber，Android的BundleVersionCode
3. 服务器协议版本号，是由于客户端迭代频繁，故增加该版本号与服务器交互，服务器端判断这个值一致就允许进入游戏

1. 游戏版本号用3位或4位版本号X.Y.Z.W

   X：除非有特大变化，否则一直是1

   Y：商店版本，每次提交Y+1

   Z：也是商店版本，一个版本内，如果C#层或者SDK有问题，需要更新商店，这时Z+1

   W：热更新版本号，每次热更W+1

## 打包逻辑

![image-20200804102301943](C:\Users\XINDONG\AppData\Roaming\Typora\typora-user-images\image-20200804102301943.png)

​	每个大版本有一个母包资源，之后再有热更新都是重新打AssetBundle和母包资源做比较，差异资源即是需要的热更新资源，增量，用以降低更新包的大小



## 检测热更新







今天模模糊糊明白了打包，出热更新的包的流程

明天理解下验证版本，上传或下载热更新包

