# 链接>静态库>链接器如何使用静态库来解析引用

### 概念补充

1. 解析引用：给到已引用的符号其定义
2. 未解析的符号：引用了但是尚未定义的符号
3. 存档文件：静态库（暂定认为）

### 使用静态库来解析引用步骤<linux系统>

```shell
linux> gcc -static ./libvector.a main2.c
```

1. 从**左至右**按照他们在**编译器驱动程序命令行**上的顺序，扫描**可重定位目标文件**和**存档文件**

2. **维护** 

   > 一个**可重定位目标文件**的集合E（会被合并成为可执行文件） 
   >
   > 一个**未解析**的**符号**集合U
   >
   > 一个在**前面**输入文件中**已定义**的符号集合D

3. 扫描时，可重定位目标文件添加到E，并更新集合U和D，**如果是存档文件**，链接器尝试匹配**U**中**未解析的符号**和**存档文件成员**（可重定位目标文件）定义的符号，**成功**则把该文件加入到集合E，并更新U和D，**匹配不成功**则丢弃该**成员目标文件**
4. 扫描完毕，如果U不为null，链接器输入错误并终止。否则会合并E中的目标文件，输出可执行文件

### 总结

​		这种算法比较吃**顺序**，比如某目标文件引用了某静态库的某个模块，但是，该库**先一步**被链接器检查了，此时U中并没有引用该静态库的某模块，那该模块将被丢弃，然后该目标文件姗姗来迟，扫描到最后都不会发现他的定义了，无从解析。

​		因此，一般静态库**放在命令行的结尾**，如果有需要，可以**重复去链接**该库。